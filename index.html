<!DOCTYPE html>
<html>
<head>
  <title>AI Home Security - Voice Control</title>
</head>

<body style="text-align:center; margin-top:100px;">

<h2>AI Home Security - Voice Control</h2>
<button id="startBtn">ðŸŽ¤ Start Voice Command</button>

<p id="status"></p>

<script>

const btn = document.getElementById("startBtn");
const statusText = document.getElementById("status");

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!SpeechRecognition) {
  statusText.innerHTML = "âŒ Speech Recognition not supported";
} else {

  const recognition = new SpeechRecognition();
  recognition.lang = "en-US";
  recognition.continuous = false;
  recognition.interimResults = false;

  btn.onclick = function() {
    statusText.innerHTML = "ðŸŽ§ Listening...";
    recognition.start();

    setTimeout(() => {
      recognition.stop();
    }, 4000);
  };

  recognition.onresult = function(event) {

    const command = event.results[0][0].transcript.toLowerCase();
    statusText.innerHTML = "You said: " + command;

    // ===== START =====
    if (command.includes("start")) {
      fetch("http://10.137.238.200/authorized");
      statusText.innerHTML += "<br>âœ… START detected - LED ON";
    }

    // ===== STOP =====
    if (command.includes("stop")) {
      fetch("http://10.137.238.200/unknown");
      statusText.innerHTML += "<br>ðŸ”” STOP detected - BUZZER ON";
    }
  };

  recognition.onerror = function(event) {
    statusText.innerHTML = "Error: " + event.error;
  };
}

</script>

</body>
</html>
